#root {
  margin: 0 auto;
  text-align: center;
  width: 100%;
  min-height: 100vh; /* prevent page from shrinking and jumping when content mounts */
}

html {
  height: 100%;
}

:root {
  --navbar-height: 64px;
}

/* Spacer below sticky navbar to prevent overlap with first content row */
.navbar-spacer {
  height: var(--navbar-height); /* keep in sync with .sidebar-sticky top and app-container min-height calc */
}

.logo {
  height: 6em;
  padding: 1.5em;
  will-change: filter;
  transition: filter 300ms;
}
.logo:hover { filter: none; }
.logo.react:hover { filter: none; }

@keyframes logo-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@media (prefers-reduced-motion: no-preference) {
  a:nth-of-type(2) .logo {
    animation: logo-spin infinite 20s linear;
  }
}

@media (max-width: 768px) {
  .card {
    margin: 8px 0px;
  }
}

.read-the-docs {
  color: #888;
}

/* App layout */
.app-container {
  padding: var(--space-12);
  max-width: 1200px;
  margin: 0 auto;
  text-align: left;
  /* Reserve space so when data-driven components expand, the page doesn't jump */
  min-height: calc(100vh - 64px); /* 64px ~ navbar height; keep in sync with Navbar */
}

.app-container-slim {
  padding-top: var(--space-12);
  max-width: 1200px;
  margin: 0 auto;
  text-align: left;
  /* Reserve space so when data-driven components expand, the page doesn't jump */
}

/* Full-width variant for pages that need to span the viewport */
.app-full { max-width: var(--app-max-width); }

/* Small screens: force full-width containers to avoid horizontal overflow */
@media (max-width: 768px) {
  .app-container,
  .app-container-slim,
  .app-full,
  .row aside {
    max-width: 100% !important;
    min-width: auto !important;
  }
  .row {
    display: contents !important;
  }
  /* Reduce paddings on small screens for denser layout */
  .app-container { padding: var(--space-8); }
  .app-container-slim { padding-top: var(--space-8); }
  .panel { padding: var(--space-6); }
  .controls { gap: var(--space-4); }
}

.section-title {
  margin-bottom: var(--space-8);
  color: var(--color-text);
  padding: var(--space-10);
}

.controls {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-6);
  justify-content: flex-start;
}

.row {
  display: flex;
  gap: var(--space-12);
}
.col { flex: 1; }

/* Utility: force vertical stacking regardless of screen size */
.row.column { flex-direction: column; }

/* Width utilities for larger screens */
@media (min-width: 769px) {
  .col-1-4 { flex: 0 0 25%; max-width: 30%; }
  .col-3-4 { flex: 1 1 75%; max-width: 70%; }
}

.editor-wrap {
  max-width: 1200px;
  min-height: 360px; /* reserve editor space prior to data load */
}

/* Panels (match look and feel of Saved Libraries manager) */
.panel {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  padding: var(--space-8);
  height: fit-content;
  border-radius: 6px;
  transition: box-shadow .2s ease, transform .15s ease, border-color .2s ease, background-color .2s ease;
}
.panel-title {
  margin: 0 0 var(--space-8) 0;
  color: var(--color-text);
  font-size: var(--fs-h3);
}
.panel-body { display: block; }
.panel:hover { box-shadow: 0 8px 28px rgba(0,0,0,0.16); transform: translateY(-1px); }

/* Unstyled list with subtle item rows */
.list-unstyled { list-style: none; padding-left: 0; margin: 0; }
.item-row { display: flex; align-items: center; gap: var(--space-8); padding: 6px 8px; border-bottom: 1px solid var(--color-border); }
.item-row:last-child { border-bottom: none; }
.item-row:hover { background: rgba(0,0,0,0.03); }
@media (prefers-color-scheme: dark) {
  .item-row:hover { background: rgba(255,255,255,0.04); }
}

/* Link affordances within panels */
.panel .link { position: relative; }
.panel .link::after {
  content: "→";
  margin-left: 6px;
  transition: transform .15s ease;
}
.panel .link:hover::after { transform: translateX(2px); }

/* Scroll area for lists */
.scroll-240 { max-height: 240px; overflow: auto; }

/* Buttons */
.btn-app {
  padding: var(--btn-padding-y) var(--btn-padding-x);
  border: none;
  border-radius: 0;
  font-size: var(--fs-control);
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  box-shadow: none;
  min-height: var(--btn-height);
}
.btn-primary { background-color: var(--primary); color: #fff; border-color: var(--primary-600); }
.btn-secondary { background-color: var(--secondary); color: #fff; border-color: var(--secondary-700); }
.btn-danger { background-color: var(--danger); color: #fff; border-color: var(--danger-700); }
.btn-success { background-color: var(--success); color: #fff; border-color: var(--success-700); }

/* Keep base button colors in both themes (no text color overrides) */

/* Light mode: outline by default; subtle fill on hover */
@media (prefers-color-scheme: light) {
  .btn-primary { background-color: transparent; color: var(--primary-700); border: 1px solid var(--primary-700); }
  .btn-success { background-color: transparent; color: var(--success-700); border: 1px solid var(--success-700); }
  .btn-danger  { background-color: transparent; color: var(--danger-700);  border: 1px solid var(--danger-700); }
  .btn-secondary { background-color: transparent; color: var(--secondary-700); border: 1px solid var(--secondary-700); }

  .btn-primary:hover { background-color: var(--primary-100); }
  .btn-success:hover { background-color: var(--success-100); }
  .btn-danger:hover  { background-color: var(--danger-100); }
  .btn-secondary:hover { background-color: var(--secondary-100); }
}

/* Dark mode: keep filled, but darken on hover using -700 ramps */
@media (prefers-color-scheme: dark) {
  /* Default: outline (plain/transparent) */
  .btn-primary { background-color: transparent; color: var(--primary-600); border: 1px solid var(--primary-600); }
  .btn-success { background-color: transparent; color: var(--success-700); border: 1px solid var(--success-700); }
  .btn-danger  { background-color: transparent; color: var(--danger-700);  border: 1px solid var(--danger-700); }
  .btn-secondary { background-color: transparent; color: var(--secondary-700); border: 1px solid var(--secondary-700); }

  /* Hover: fill for feedback */
  .btn-primary:hover { background-color: var(--primary-700); color: #fff; }
  .btn-success:hover { background-color: var(--success-700); color: #fff; }
  .btn-danger:hover  { background-color: var(--danger-700); color: #fff; }
  .btn-secondary:hover { background-color: var(--secondary-100); color: var(--secondary-700); }
}

/* Manual toggle: force translucent in html.light using tokens */
html.light .btn-primary { background-color: transparent; color: var(--primary-700); border: 1px solid var(--primary-700); }
html.light .btn-success { background-color: transparent; color: var(--success-700); border: 1px solid var(--success-700); }
html.light .btn-danger  { background-color: transparent; color: var(--danger-700);  border: 1px solid var(--danger-700); }
html.light .btn-secondary { background-color: transparent; color: var(--secondary-700); border: 1px solid var(--secondary-700); }
html.light .btn-primary:hover { background-color: var(--primary-100); }
html.light .btn-success:hover { background-color: var(--success-100); }
html.light .btn-danger:hover  { background-color: var(--danger-100); }
html.light .btn-secondary:hover { background-color: var(--secondary-100); }

/* Manual dark toggle: same hover as prefers-color-scheme: dark */
html.dark .btn-primary { background-color: transparent; color: var(--primary-600); border: 1px solid var(--primary-600); }
html.dark .btn-success { background-color: transparent; color: var(--success-700); border: 1px solid var(--success-700); }
html.dark .btn-danger  { background-color: transparent; color: var(--danger-700);  border: 1px solid var(--danger-700); }
html.dark .btn-secondary { background-color: transparent; color: var(--secondary-700); border: 1px solid var(--secondary-700); }
html.dark .btn-primary:hover { background-color: var(--primary-700); color: #fff; }
html.dark .btn-success:hover { background-color: var(--success-700); color: #fff; }
html.dark .btn-danger:hover  { background-color: var(--danger-700); color: #fff; }
html.dark .btn-secondary:hover { background-color: var(--secondary-100); color: var(--secondary-700); }

/* CSV viewer */
.csv-viewer { margin-top: var(--space-12); }
.csv-toolbar { align-items: center; gap: var(--space-6); flex-wrap: wrap; }
.csv-title { margin: 0; }
.csv-stat { font-size: 12px; opacity: 0.8; }
.csv-stat-dim { font-size: 12px; opacity: 0.6; }

.csv-controls { gap: var(--space-8); align-items: center; margin-top: var(--space-6); flex-wrap: wrap; }
.csv-controls .csv-pagination { margin-left: auto; display: flex; align-items: center; gap: var(--space-6); }
.csv-page-info { font-size: 12px; }

.csv-filter,
.csv-page-size {
  padding: var(--space-6) var(--space-8);
  background: var(--color-surface);
  color: var(--color-text);
  border: 1px solid var(--color-border);
  border-radius: 0;
  font-size: var(--fs-control);
}
.csv-filter { min-width: 240px; }
.csv-label { font-size: 12px; }

.csv-table-wrap {
  overflow: auto;
  border: 1px solid var(--color-border);
  border-radius: 0;
  margin-top: var(--space-6);
  max-height: 480px;
  background: var(--color-surface);
}
.csv-table { width: 100%; border-collapse: separate; border-spacing: 0; }
.csv-th { position: sticky; top: 0; background: var(--color-surface); color: var(--color-text); border-bottom: 1px solid var(--color-border); padding: var(--space-6) var(--space-8); text-align: left; white-space: nowrap; }
.csv-td { border-bottom: 1px solid var(--color-border); padding: var(--space-6) var(--space-8); vertical-align: top; }
.csv-empty { padding: var(--space-8); text-align: center; opacity: 0.7; }
.csv-controls-bottom { margin-top: var(--space-6); }
.csv-note { font-size: 12px; opacity: 0.75; margin-top: var(--space-6); }

/* CSV: column filter button uses pseudo-element so header textContent is clean */
.csv-filter-btn { position: relative; padding: 0 6px; min-width: 24px; height: 24px; line-height: 1; display: inline-flex; align-items: center; justify-content: center; }
.csv-filter-btn::after { content: "⚙"; font-size: 14px; }

/* Results page layout */
.layout-results {
  display: flex;
  gap: var(--space-12);
  align-items: flex-start;
  min-height: 60vh; /* reserve main area so sidebar/content don't cause jump on mount */
}

.results-sidebar {
  flex: 0 0 320px;
}

.sidebar-sticky {
  position: sticky;
  top: 64px; /* account for sticky navbar height */
}

.results-main {
  flex: 1 1 auto;
  min-width: 0; /* prevent overflow with flex */
}

/* Responsive helpers */
@media (max-width: 768px) {
  .row.stack-sm {
    flex-direction: column;
  }
  .row.stack-sm .col {
    flex: 1 1 100%;
  }
}

/* Saved Libraries dropdown layout */
.saved-libs {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
  width: 100%;
}
.saved-libs-label {
  display: flex;
  align-items: center;
  margin-bottom: 0;
  flex: 1 1 260px;
  min-width: 0;
}
.saved-libs-label-text { margin-right: 8px; white-space: nowrap; }
.saved-libs-select { padding: 6px 8px; width: 100%; min-width: 0; max-width: 100%; }
.saved-libs-actions { flex: 0 0 auto; }

/* Splash page */
.splash-hero {
  /* Layered, theme-aware background */
  background:
    radial-gradient(900px 360px at calc(8% + var(--parallax-x, 0px)) calc(-12% + var(--parallax-y, 0px)), var(--primary-100), transparent 65%),
    radial-gradient(600px 280px at calc(90% + var(--parallax-x, 0px)) calc(-20% + var(--parallax-y, 0px)), rgba(96,165,250,0.12), transparent 70%),
    linear-gradient(135deg, var(--color-surface) 0%, rgba(0,0,0,0) 60%);
  border: none; /* edge-to-edge */
  padding: 0;
  margin: 0;
  position: relative;
  overflow: hidden;
  min-height: clamp(420px, 62vh, 720px);
}

.splash-hero::after {
  /* subtle vignette */
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: radial-gradient(120% 60% at 50% 0%, transparent 30%, rgba(0,0,0,0.06) 100%);
}
.splash-page { padding-top: var(--space-20); }
.splash-inner { max-width: 760px; margin: 0 auto; padding: 0 var(--space-6); }
.splash-hero-content { max-width: 760px; margin-inline: auto; z-index: 1; padding: 20px; margin-top: 10%; }
.splash-hero-content .btn {align-content: center; height: var(--btn-height); padding: var(--space-8);}
@media (max-width: 900px) {
  .splash-hero-content {
    margin-top: 0%;
    display: flex;
    flex-direction: column;
    min-height: inherit; /* match hero height */
    padding-bottom: var(--space-10);
  }
  .splash-cta {
    margin-top: auto !important; /* push CTA to bottom */
  }
}
.splash-title {
  margin: 0 0 var(--space-6) 0;
  font-size: clamp(34px, 5vw, 56px);
  color: var(--color-text);
  text-shadow: 0 1px 0 rgba(0,0,0,0.04);
}
.splash-title::after {
  content: "";
  display: block;
  width: 50%;
  height: 3px;
  margin-top: 10px;
  background: linear-gradient(90deg, var(--primary-700), transparent);
  animation: bar-in 700ms ease-out both;
}
@keyframes bar-in { from { transform: scaleX(0); transform-origin: left; } to { transform: scaleX(1); transform-origin: left; } }
.splash-subtitle { margin: 0 0 var(--space-8) 0; opacity: 0.9; }
.splash-cta { display: flex; gap: var(--space-8); flex-wrap: wrap; margin-top: var(--space-4); }
.splash-cta .btn {
  box-shadow: 0 6px 16px rgba(0,0,0,0.12);
  transform: translateY(0);
  transition: transform .15s ease, box-shadow .2s ease, background-color .2s ease, color .2s ease;
  border-radius: 8px;
}
.splash-cta .btn:hover { transform: translateY(-1px); box-shadow: 0 10px 22px rgba(0,0,0,0.18); }

/* Hero fade-in on load */
.splash-hero-content .splash-subtitle,
.splash-hero-content .splash-cta { opacity: 0; transform: translateY(6px); }
.splash-hero-content.fade-in .splash-subtitle,
.splash-hero-content.fade-in .splash-cta {
  opacity: 1; transform: translateY(0);
  transition: opacity .6s ease, transform .6s ease;
}
.splash-hero-content.fade-in .splash-cta { transition-delay: .06s; }

@media (prefers-reduced-motion: reduce) {
  .splash-hero-content .splash-subtitle,
  .splash-hero-content .splash-cta { opacity: 1; transform: none; }
}

/* Subtle backgrounds for subsequent sections */
.section {
  position: relative;
  z-index: 0;
  padding: var(--space-16) 0;
  /* default: inherit subtle from surface; overridden per theme below */
  background: linear-gradient(180deg, var(--color-surface) 0%, rgba(0,0,0,0) 100%);
}

/* Light mode: airy, subtle surface fade #dde1e9 98%, #e1e3e8 2%*/
@media (prefers-color-scheme: light) {
  .section {
    background: linear-gradient(to right, #dde1e9, #e1e3e8);
  }
}

/* Manual light toggle */
html.light .section {
  background: linear-gradient(to right, #dde1e9, #e1e3e8);
}

/* Dark mode: keep darker banded gradient */
@media (prefers-color-scheme: dark) {
  .section { background: linear-gradient(to right, #1a2129, #151920); }
}
html.dark .section { background: linear-gradient(to right, #1a2129, #151920); }

/* Panels micro-interactions */
.panel {
  transition: transform .25s ease, box-shadow .25s ease, background-color .25s ease;
  will-change: transform;
}
.panel:hover { transform: translateY(-2px); box-shadow: 0 10px 24px rgba(0,0,0,0.10); }

/* Scroll-reveal animations */
.reveal { opacity: 0; transform: translateY(12px); }
.reveal.in-view { opacity: 1; transform: translateY(0); transition: opacity .6s ease, transform .6s ease; }
.reveal.delay-1 { transition-delay: .06s; }
.reveal.delay-2 { transition-delay: .12s; }
.reveal.delay-3 { transition-delay: .18s; }

/* Section title underline sweep (smaller) */
.section-title {
  position: relative;
}
.section-title::after {
  content: "";
  display: block;
  width: 36%;
  max-width: 220px;
  height: 2px;
  margin-top: 8px;
  background: linear-gradient(90deg, var(--primary-600), transparent);
  transform-origin: left;
  transform: scaleX(0);
}
.reveal.in-view .section-title::after,
.section-title.reveal.in-view::after { animation: bar-in-small 500ms ease-out both; }

@keyframes bar-in-small { from { transform: scaleX(0); } to { transform: scaleX(1); } }

/* Item-based pop-in for grid items: only items with .reveal animate when they individually enter view */
.splash-grid > .reveal { opacity: 0; transform: translateY(10px) scale(0.98); }
.splash-grid > .reveal.in-view { opacity: 1; transform: none; transition: opacity .5s ease, transform .5s ease; }

@media (prefers-reduced-motion: reduce) {
  .splash-grid > * { opacity: 1; transform: none; }
}

@media (prefers-reduced-motion: reduce) {
  .reveal, .reveal.in-view { transition: none !important; transform: none !important; opacity: 1 !important; }
  .panel { transition: none !important; }
}

/* Theme-aware CTA emphasis */
@media (prefers-color-scheme: light) {
  .splash-cta .btn.btn-primary { background-color: var(--primary-700); color: #fff; border-color: var(--primary-700); }
  .splash-cta .btn.btn-primary:hover { background-color: var(--primary-600); }
}
html.light .splash-cta .btn.btn-primary { background-color: var(--primary-700); color: #fff; border-color: var(--primary-700); }
html.light .splash-cta .btn.btn-primary:hover { background-color: var(--primary-600); }

@media (prefers-color-scheme: dark) {
  .splash-cta .btn.btn-secondary { background-color: transparent; color: var(--secondary-700); border-color: var(--secondary-700); }
  .splash-cta .btn.btn-secondary:hover { background-color: var(--secondary-100); color: var(--secondary-700); }
}
html.dark .splash-cta .btn.btn-secondary { background-color: transparent; color: var(--secondary-700); border-color: var(--secondary-700); }
html.dark .splash-cta .btn.btn-secondary:hover { background-color: var(--secondary-100); color: var(--secondary-700); }

.splash-page .section { padding: var(--space-4) 0 var(--space-2); }
.splash-page .section + .section { margin-top: var(--space-14); }

.splash-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: var(--space-20);
}
@media (max-width: 900px) {
  .splash-grid { grid-template-columns: 1fr; }
}

/* Remove conflicting keyframe pop-in; rely on reveal + transition delays above */
/* Retain panel spacing without forcing animation */
.splash-grid .panel { margin: var(--space-10); height: auto; }

/* Splash logo animation */
.splash-logo {
  width: 96px;
  height: 96px;
  display: block;
  margin: 0 0 var(--space-8) 0;
  filter: drop-shadow(0 6px 16px rgba(0,0,0,0.15));
  animation: splash-float 6s ease-in-out infinite;
}

@keyframes splash-float {
  0% { transform: translateY(0px) scale(1); opacity: 0.96; }
  50% { transform: translateY(-6px) scale(1.01); opacity: 1; }
  100% { transform: translateY(0px) scale(1); opacity: 0.96; }
}

@media (prefers-reduced-motion: reduce) {
  .splash-logo { animation: none; }
}

/* Hero illustration positioned behind text */
.splash-illustration {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: stretch; /* allow the image to fill height */
  justify-content: stretch;
  pointer-events: none;
  z-index: 0;
}
.splash-illustration img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: 80% 100%; /* bias towards right/bottom */
  opacity: 0.2;
  filter: saturate(0.9) contrast(1.05);
  transition: opacity .3s ease;
}
@media (max-width: 900px) {
  .splash-illustration img { object-position: 70% 100%; opacity: 0.22; }
}
@media (prefers-color-scheme: dark) {
  .splash-illustration img { opacity: 0.22; }
}
@media (prefers-reduced-motion: reduce) {
  .splash-illustration img { transition: none; }
}
