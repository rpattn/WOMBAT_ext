#root {
  margin: 0 auto;
  text-align: center;
  width: 100%;
  min-height: 100vh; /* prevent page from shrinking and jumping when content mounts */
}

html {
  height: 100%;
}

:root {
  --navbar-height: 64px;
}

/* Spacer below sticky navbar to prevent overlap with first content row */
.navbar-spacer {
  height: var(--navbar-height); /* keep in sync with .sidebar-sticky top and app-container min-height calc */
}

.logo {
  height: 6em;
  padding: 1.5em;
  will-change: filter;
  transition: filter 300ms;
}
.logo:hover { filter: none; }
.logo.react:hover { filter: none; }

@keyframes logo-spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

@media (prefers-reduced-motion: no-preference) {
  a:nth-of-type(2) .logo {
    animation: logo-spin infinite 20s linear;
  }
}

.card {
  padding: 2px;
}

.read-the-docs {
  color: #888;
}

/* App layout */
.app-container {
  padding: var(--space-12);
  max-width: 1200px;
  margin: 0 auto;
  text-align: left;
  /* Reserve space so when data-driven components expand, the page doesn't jump */
  min-height: calc(100vh - 64px); /* 64px ~ navbar height; keep in sync with Navbar */
}

/* Full-width variant for pages that need to span the viewport */
.app-full { max-width: var(--app-max-width); width: 95%; }

.section { margin-bottom: var(--space-12); }
.section-title {
  margin-bottom: var(--space-8);
  color: var(--color-text);
}

.controls {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-6);
  justify-content: flex-start;
}

.row {
  display: flex;
  gap: var(--space-12);
  width: 100%;
}
.col { flex: 1; }

/* Utility: force vertical stacking regardless of screen size */
.row.column { flex-direction: column; }

/* Width utilities for larger screens */
@media (min-width: 769px) {
  .col-1-4 { flex: 0 0 25%; max-width: 30%; }
  .col-3-4 { flex: 1 1 75%; max-width: 70%; }
}

.editor-wrap {
  max-width: 1200px;
  min-height: 360px; /* reserve editor space prior to data load */
}

/* Panels (match look and feel of Saved Libraries manager) */
.panel {
  background: var(--color-surface);
  border: 1px solid var(--color-border);
  padding: var(--space-8);
}
.panel-title {
  margin: 0 0 var(--space-8) 0;
  color: var(--color-text);
  font-size: var(--fs-h3);
}
.panel-body { display: block; }

/* Unstyled list with subtle item rows */
.list-unstyled { list-style: none; padding-left: 0; margin: 0; }
.item-row { display: flex; align-items: center; gap: var(--space-8); padding: 6px 8px; border-bottom: 1px solid var(--color-border); }
.item-row:last-child { border-bottom: none; }
.item-row:hover { background: rgba(0,0,0,0.03); }
@media (prefers-color-scheme: dark) {
  .item-row:hover { background: rgba(255,255,255,0.04); }
}

/* Scroll area for lists */
.scroll-240 { max-height: 240px; overflow: auto; }

/* Buttons */
.btn-app {
  padding: var(--btn-padding-y) var(--btn-padding-x);
  border: none;
  border-radius: 0;
  font-size: var(--fs-control);
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  box-shadow: none;
  min-height: var(--btn-height);
}
.btn-primary { background-color: var(--primary); color: #fff; border-color: var(--primary-600); }
.btn-secondary { background-color: var(--secondary); color: #fff; border-color: var(--secondary-700); }
.btn-danger { background-color: var(--danger); color: #fff; border-color: var(--danger-700); }
.btn-success { background-color: var(--success); color: #fff; border-color: var(--success-700); }

/* Keep base button colors in both themes (no text color overrides) */

/* Light mode: outline by default; subtle fill on hover */
@media (prefers-color-scheme: light) {
  .btn-primary { background-color: transparent; color: var(--primary-700); border: 1px solid var(--primary-700); }
  .btn-success { background-color: transparent; color: var(--success-700); border: 1px solid var(--success-700); }
  .btn-danger  { background-color: transparent; color: var(--danger-700);  border: 1px solid var(--danger-700); }
  .btn-secondary { background-color: transparent; color: var(--secondary-700); border: 1px solid var(--secondary-700); }

  .btn-primary:hover { background-color: var(--primary-100); }
  .btn-success:hover { background-color: var(--success-100); }
  .btn-danger:hover  { background-color: var(--danger-100); }
  .btn-secondary:hover { background-color: var(--secondary-100); }
}

/* Dark mode: keep filled, but darken on hover using -700 ramps */
@media (prefers-color-scheme: dark) {
  /* Default: outline (plain/transparent) */
  .btn-primary { background-color: transparent; color: var(--primary-600); border: 1px solid var(--primary-600); }
  .btn-success { background-color: transparent; color: var(--success-700); border: 1px solid var(--success-700); }
  .btn-danger  { background-color: transparent; color: var(--danger-700);  border: 1px solid var(--danger-700); }
  .btn-secondary { background-color: transparent; color: var(--secondary-700); border: 1px solid var(--secondary-700); }

  /* Hover: fill for feedback */
  .btn-primary:hover { background-color: var(--primary-700); color: #fff; }
  .btn-success:hover { background-color: var(--success-700); color: #fff; }
  .btn-danger:hover  { background-color: var(--danger-700); color: #fff; }
  .btn-secondary:hover { background-color: var(--secondary-100); color: var(--secondary-700); }
}

/* Manual toggle: force translucent in html.light using tokens */
html.light .btn-primary { background-color: transparent; color: var(--primary-700); border: 1px solid var(--primary-700); }
html.light .btn-success { background-color: transparent; color: var(--success-700); border: 1px solid var(--success-700); }
html.light .btn-danger  { background-color: transparent; color: var(--danger-700);  border: 1px solid var(--danger-700); }
html.light .btn-secondary { background-color: transparent; color: var(--secondary-700); border: 1px solid var(--secondary-700); }
html.light .btn-primary:hover { background-color: var(--primary-100); }
html.light .btn-success:hover { background-color: var(--success-100); }
html.light .btn-danger:hover  { background-color: var(--danger-100); }
html.light .btn-secondary:hover { background-color: var(--secondary-100); }

/* Manual dark toggle: same hover as prefers-color-scheme: dark */
html.dark .btn-primary { background-color: transparent; color: var(--primary-600); border: 1px solid var(--primary-600); }
html.dark .btn-success { background-color: transparent; color: var(--success-700); border: 1px solid var(--success-700); }
html.dark .btn-danger  { background-color: transparent; color: var(--danger-700);  border: 1px solid var(--danger-700); }
html.dark .btn-secondary { background-color: transparent; color: var(--secondary-700); border: 1px solid var(--secondary-700); }
html.dark .btn-primary:hover { background-color: var(--primary-700); color: #fff; }
html.dark .btn-success:hover { background-color: var(--success-700); color: #fff; }
html.dark .btn-danger:hover  { background-color: var(--danger-700); color: #fff; }
html.dark .btn-secondary:hover { background-color: var(--secondary-100); color: var(--secondary-700); }

/* CSV viewer */
.csv-viewer { margin-top: var(--space-12); }
.csv-toolbar { align-items: center; gap: var(--space-6); flex-wrap: wrap; }
.csv-title { margin: 0; }
.csv-stat { font-size: 12px; opacity: 0.8; }
.csv-stat-dim { font-size: 12px; opacity: 0.6; }

.csv-controls { gap: var(--space-8); align-items: center; margin-top: var(--space-6); flex-wrap: wrap; }
.csv-controls .csv-pagination { margin-left: auto; display: flex; align-items: center; gap: var(--space-6); }
.csv-page-info { font-size: 12px; }

.csv-filter,
.csv-page-size {
  padding: var(--space-6) var(--space-8);
  background: var(--color-surface);
  color: var(--color-text);
  border: 1px solid var(--color-border);
  border-radius: 0;
  font-size: var(--fs-control);
}
.csv-filter { min-width: 240px; }
.csv-label { font-size: 12px; }

.csv-table-wrap {
  overflow: auto;
  border: 1px solid var(--color-border);
  border-radius: 0;
  margin-top: var(--space-6);
  max-height: 480px;
  background: var(--color-surface);
}
.csv-table { width: 100%; border-collapse: separate; border-spacing: 0; }
.csv-th { position: sticky; top: 0; background: var(--color-surface); color: var(--color-text); border-bottom: 1px solid var(--color-border); padding: var(--space-6) var(--space-8); text-align: left; white-space: nowrap; }
.csv-td { border-bottom: 1px solid var(--color-border); padding: var(--space-6) var(--space-8); vertical-align: top; }
.csv-empty { padding: var(--space-8); text-align: center; opacity: 0.7; }
.csv-controls-bottom { margin-top: var(--space-6); }
.csv-note { font-size: 12px; opacity: 0.75; margin-top: var(--space-6); }

/* Results page layout */
.layout-results {
  display: flex;
  gap: var(--space-12);
  align-items: flex-start;
  min-height: 60vh; /* reserve main area so sidebar/content don't cause jump on mount */
}

.results-sidebar {
  flex: 0 0 320px;
}

.sidebar-sticky {
  position: sticky;
  top: 64px; /* account for sticky navbar height */
}

.results-main {
  flex: 1 1 auto;
  min-width: 0; /* prevent overflow with flex */
}

/* Responsive helpers */
@media (max-width: 768px) {
  .row.stack-sm {
    flex-direction: column;
  }
  .row.stack-sm .col {
    flex: 1 1 100%;
  }
}

/* Saved Libraries dropdown layout */
.saved-libs {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
  width: 100%;
  max-width: 400px;
}
.saved-libs-label {
  display: flex;
  align-items: center;
  margin-bottom: 0;
  flex: 1 1 260px;
  min-width: 0;
}
.saved-libs-label-text { margin-right: 8px; white-space: nowrap; }
.saved-libs-select { padding: 6px 8px; width: 100%; min-width: 0; max-width: 100%; }
.saved-libs-actions { flex: 0 0 auto; }
